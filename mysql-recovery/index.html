<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no"><meta name=description content="报错如下 $ ./mysqld 2017-03-23 08:42:32 1358 [ERROR] InnoDB: Attempted to open a previously opened tablespace. Previous tablespace mysql/slave_relay_log_info uses space ID: 3 at filepath: ./mysql/slave_relay_log_info.ibd. Cannot open tablespace shop/admin which uses space ID: 3 at filepath: ./shop/admin.ibd 2017-03-23 08:42:32 7fffad71c3c0 InnoDB: Operating system error number 2 in a file operation. 修复方式 It means one of your tables is corrupted. Weirdly this has happened to frequently upon a machine crash. This is how I fixed it: open my.cnf (in MAMP > File > Edit Template > MySQL) add the line: innodb_force_recovery = 1 save and"><meta name=theme-color media="(prefers-color-scheme: light)" content="white"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#0f172a"><meta property="og:title" content="MySQL 无法启动修复"><meta property="og:description" content="报错如下 $ ./mysqld 2017-03-23 08:42:32 1358 [ERROR] InnoDB: Attempted to open a previously opened tablespace. Previous tablespace mysql/slave_relay_log_info uses space ID: 3 at filepath: ./mysql/slave_relay_log_info.ibd. Cannot open tablespace shop/admin which uses space ID: 3 at filepath: ./shop/admin.ibd 2017-03-23 08:42:32 7fffad71c3c0 InnoDB: Operating system error number 2 in a file operation. 修复方式 It means one of your tables is corrupted. Weirdly this has happened to frequently upon a machine crash. This is how I fixed it: open my.cnf (in MAMP > File > Edit Template > MySQL) add the line: innodb_force_recovery = 1 save and"><meta property="og:type" content="article"><meta property="og:url" content="https://sxyz.blog/mysql-recovery/"><meta property="og:image" content="https://sxyz.blog/images/others/artwork.jpg"><meta property="article:section" content><meta property="article:published_time" content="2017-03-26T01:51:01+08:00"><meta property="article:modified_time" content="2017-03-26T01:51:01+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sxyz.blog/images/others/artwork.jpg"><meta name=twitter:title content="MySQL 无法启动修复"><meta name=twitter:description content="报错如下 $ ./mysqld 2017-03-23 08:42:32 1358 [ERROR] InnoDB: Attempted to open a previously opened tablespace. Previous tablespace mysql/slave_relay_log_info uses space ID: 3 at filepath: ./mysql/slave_relay_log_info.ibd. Cannot open tablespace shop/admin which uses space ID: 3 at filepath: ./shop/admin.ibd 2017-03-23 08:42:32 7fffad71c3c0 InnoDB: Operating system error number 2 in a file operation. 修复方式 It means one of your tables is corrupted. Weirdly this has happened to frequently upon a machine crash. This is how I fixed it: open my.cnf (in MAMP > File > Edit Template > MySQL) add the line: innodb_force_recovery = 1 save and"><title data-site="Sxyazi’s blog">MySQL 无法启动修复 | Sxyazi’s blog</title><link rel=stylesheet href=/assets/index-fad781fe.css><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=theme-color content="#ffffff"></head><body><main><nav id=nav><a href=/>Home</a><a href=/archives/>Archives</a><a href=/tags/>Tags</a><a href=/links/>Links</a><a href=/about/>About</a></nav><section id=post><h1>MySQL 无法启动修复</h1><time datetime=2017-03-26T01:51:01+0800>03-26</time>
<span>mysql-recovery</span><div><h2 id=报错如下>报错如下</h2><pre><code class=language-bash>$ ./mysqld

2017-03-23 08:42:32 1358 [ERROR] InnoDB: Attempted to open a previously opened tablespace. Previous tablespace mysql/slave_relay_log_info uses space ID: 3 at filepath: ./mysql/slave_relay_log_info.ibd. Cannot open tablespace shop/admin which uses space ID: 3 at filepath: ./shop/admin.ibd
2017-03-23 08:42:32 7fffad71c3c0  InnoDB: Operating system error number 2 in a file operation.
</code></pre><h2 id=修复方式>修复方式</h2><p>It means one of your tables is corrupted. Weirdly this has happened to frequently upon a machine crash. This is how I fixed it:<ol><li>open my.cnf (in MAMP > File > Edit Template > MySQL)<li>add the line: innodb_force_recovery = 1<li>save and start servers</ol><p>The table will likely still be broken, but mysql should start. It means you may have to replace your table: wp_term_taxonomy<p>Note: If innodb_force_recovery = 1 does not work, try going up in numbers: innodb_force_recovery = 2 (etc) But tread carefully. Here&rsquo;s MySQL&rsquo;s warning on this setting:<a href=https://dev.mysql.com/doc/refman/5.5/en/forcing-innodb-recovery.html>https://dev.mysql.com/doc/refman/5.5/en/forcing-innodb-recovery.html</a><p>(参考链接：http://stackoverflow.com/a/40919026)<h2 id=另外补充>另外补充</h2><p>查看 MySQL 配置文件路径方法：<code>mysql --help | grep my.cnf</code><pre><code class=language-bash>$ ./mysql --help | grep my.cnf

                      order of preference, my.cnf, $MYSQL_TCP_PORT,
/etc/my.cnf /etc/mysql/my.cnf /Applications/MAMP/conf/my.cnf ~/.my.cnf
</code></pre><p>若不存在创建一个文件即可。</div><ul><li><a href=/tags/mysql>MySQL</a><li><a href=/tags/database>Database</a></ul></section></main><app></app><noscript>You need to enable JavaScript to run this app.</noscript><script type=module crossorigin src=/assets/index-b1ee8dc4.js></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XWVTHMXTRH"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XWVTHMXTRH")</script></body></html>